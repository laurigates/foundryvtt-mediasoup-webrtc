{"version":3,"file":"mediasoup-vtt.js","sources":["../src/constants/index.js","../src/utils/logger.js","../src/client/MediaSoupVTTClient.js","../src/ui/configDialog.js","../src/ui/settings.js","../src/ui/sceneControls.js","../src/ui/playerList.js","../src/ui/styles.js","../src/mediasoup-vtt.js"],"sourcesContent":["/**\n * Constants for the MediaSoupVTT plugin\n */\n\nexport const MODULE_ID = 'mediasoup-vtt';\nexport const MODULE_TITLE = 'MediaSoupVTT';\nexport const LOG_PREFIX = `${MODULE_TITLE} |`;\n\n// Settings keys\nexport const SETTING_MEDIASOUP_URL = 'mediaSoupServerUrl';\nexport const SETTING_AUTO_CONNECT = 'autoConnect';\nexport const SETTING_DEFAULT_AUDIO_DEVICE = 'defaultAudioDevice';\nexport const SETTING_DEFAULT_VIDEO_DEVICE = 'defaultVideoDevice';\nexport const SETTING_DEBUG_LOGGING = 'debugLogging';\n\n// Media track kinds\nexport const MEDIA_KIND_AUDIO = 'audio';\nexport const MEDIA_KIND_VIDEO = 'video';\n\n// AppData tags for producers\nexport const APP_DATA_TAG_MIC = 'mic';\nexport const APP_DATA_TAG_WEBCAM = 'webcam';\n\n// Signaling message types\nexport const SIG_MSG_TYPES = {\n    GET_ROUTER_RTP_CAPABILITIES: 'getRouterRtpCapabilities',\n    ROUTER_RTP_CAPABILITIES: 'routerRtpCapabilities',\n    CREATE_WEBRTC_TRANSPORT: 'createWebRtcTransport',\n    TRANSPORT_CREATED: 'transportCreated',\n    CONNECT_TRANSPORT: 'connectTransport',\n    TRANSPORT_CONNECTED: 'transportConnected',\n    PRODUCE: 'produce',\n    PRODUCED: 'produced',\n    NEW_PRODUCER: 'newProducer',\n    CONSUME: 'consume',\n    CONSUMED: 'consumed',\n    PRODUCER_CLOSED: 'producerClosed',\n    PAUSE_PRODUCER: 'pauseProducer',\n    RESUME_PRODUCER: 'resumeProducer',\n    CONSUMER_PAUSE: 'consumerPause',\n    CONSUMER_RESUME: 'consumerResume',\n    CONSUMER_CLOSE: 'consumerClose',\n};","/**\n * Logging utilities for MediaSoupVTT\n */\n\nimport { MODULE_ID, LOG_PREFIX, SETTING_DEBUG_LOGGING } from '../constants/index.js';\n\nexport function log(message, level = 'info', force = false) {\n    const settingDebug = game.settings.get(MODULE_ID, SETTING_DEBUG_LOGGING);\n    if (level === 'debug' && !settingDebug && !force) return;\n    \n    const timestamp = new Date().toLocaleTimeString();\n    const enrichedMessage = `[${timestamp}] ${message}`;\n    \n    switch (level) {\n    case 'warn': \n        console.warn(`${LOG_PREFIX} ${enrichedMessage}`); \n        break;\n    case 'error': \n        console.error(`${LOG_PREFIX} ${enrichedMessage}`); \n        break;\n    case 'info': \n        console.info(`${LOG_PREFIX} ${enrichedMessage}`); \n        break;\n    case 'debug': \n        console.debug(`${LOG_PREFIX} ${enrichedMessage}`); \n        break;\n    default: \n        console.log(`${LOG_PREFIX} ${enrichedMessage}`);\n    }\n}","/**\n * MediaSoup WebRTC Client for FoundryVTT\n */\n\nimport { \n    MODULE_ID, MODULE_TITLE, \n    SETTING_MEDIASOUP_URL, SETTING_DEFAULT_AUDIO_DEVICE, SETTING_DEFAULT_VIDEO_DEVICE,\n    MEDIA_KIND_AUDIO, MEDIA_KIND_VIDEO,\n    APP_DATA_TAG_MIC, APP_DATA_TAG_WEBCAM,\n    SIG_MSG_TYPES \n} from '../constants/index.js';\nimport { log } from '../utils/logger.js';\n\nexport class MediaSoupVTTClient {\n    constructor() {\n        this.device = null;\n        this.socket = null;\n        this.sendTransport = null;\n        this.recvTransport = null;\n        this.producers = new Map();\n        this.consumers = new Map();\n\n        this.serverUrl = game.settings.get(MODULE_ID, SETTING_MEDIASOUP_URL);\n        this.isConnected = false;\n        this.isConnecting = false;\n        this.requestMap = new Map();\n        this.requestIdCounter = 0;\n\n        this.localAudioStream = null;\n        this.localVideoStream = null;\n        this.remoteUserStreams = new Map();\n\n        if (!window.mediasoupClient) {\n            log('mediasoup-client library is not loaded. This plugin will not function.', 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: mediasoup-client library not found! Critical error.`, { permanent: true });\n        }\n    }\n\n    async connect() {\n        if (this.isConnected || this.isConnecting) {\n            log(`Cannot connect. Already connected or connecting. Connected: ${this.isConnected}, Connecting: ${this.isConnecting}`, 'warn');\n            return;\n        }\n        if (!this.serverUrl) {\n            log('MediaSoup server URL is not configured.', 'warn', true);\n            ui.notifications.warn(`${MODULE_TITLE}: MediaSoup server URL not configured. Please set it in module settings.`);\n            return;\n        }\n        if (!window.mediasoupClient) {\n            log('mediasoup-client library not found. Cannot connect.', 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: mediasoup-client library not available. Cannot connect.`);\n            return;\n        }\n\n        this.isConnecting = true;\n        this._updateConnectionStatus('connecting');\n        log(`Attempting to connect to MediaSoup server at ${this.serverUrl}...`);\n\n        try {\n            this.socket = new WebSocket(this.serverUrl);\n            this.socket.onopen = async () => {\n                log('WebSocket connection established.', 'info');\n                await this._initializeMediasoupDevice();\n            };\n            this.socket.onmessage = (event) => {\n                try {\n                    const message = JSON.parse(event.data);\n                    this._handleSignalingMessage(message);\n                } catch (error) {\n                    log(`Error parsing signaling message: ${error.message}`, 'error');\n                    console.error('Raw message data:', event.data);\n                }\n            };\n            this.socket.onerror = (error) => {\n                log(`WebSocket error: ${error.message || 'Unknown error'}`, 'error', true);\n                console.error('WebSocket error object:', error);\n                ui.notifications.error(`${MODULE_TITLE}: WebSocket connection error.`);\n                this._handleConnectionFailure();\n            };\n            this.socket.onclose = (event) => {\n                log(`WebSocket connection closed. Code: ${event.code}, Reason: ${event.reason || 'No reason given'}`, event.wasClean ? 'info' : 'warn');\n                if (!event.wasClean) {\n                    ui.notifications.warn(`${MODULE_TITLE}: WebSocket connection closed unexpectedly.`);\n                }\n                this._handleConnectionFailure();\n            };\n        } catch (error) {\n            log(`Failed to initiate WebSocket connection: ${error.message}`, 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: Failed to initiate connection.`);\n            this._handleConnectionFailure();\n        }\n    }\n\n    disconnect(showNotification = true) {\n        log('Disconnecting from MediaSoup server...', 'info');\n        this.isConnecting = false;\n\n        this.stopLocalAudio(false);\n        this.stopLocalVideo(false);\n\n        if (this.socket) {\n            this.socket.onopen = null;\n            this.socket.onmessage = null;\n            this.socket.onerror = null;\n            this.socket.onclose = null;\n            if (this.socket.readyState === WebSocket.OPEN || this.socket.readyState === WebSocket.CONNECTING) {\n                this.socket.close();\n            }\n            this.socket = null;\n        }\n\n        this.producers.forEach(p => { if (p && !p.closed) p.close(); });\n        this.producers.clear();\n\n        this.consumers.forEach(consumer => {\n            if (consumer && !consumer.closed) consumer.close();\n            const userStreamData = Array.from(this.remoteUserStreams.entries()).find(\n                ([_uid, data]) => data.audioConsumerId === consumer.id || data.videoConsumerId === consumer.id\n            );\n            if (userStreamData) {\n                const userId = userStreamData[0];\n                if (consumer.kind === MEDIA_KIND_AUDIO) $(`#mediasoup-consumer-audio-${userId}`).remove();\n                else if (consumer.kind === MEDIA_KIND_VIDEO) this._removeRemoteVideoElement(userId);\n            }\n        });\n        this.consumers.clear();\n        this.remoteUserStreams.clear();\n\n        if (this.sendTransport && !this.sendTransport.closed) {\n            this.sendTransport.close();\n            this.sendTransport = null;\n        }\n        if (this.recvTransport && !this.recvTransport.closed) {\n            this.recvTransport.close();\n            this.recvTransport = null;\n        }\n\n        this.device = null;\n        this.requestMap.forEach(({ reject }) => reject(new Error('Disconnecting.')));\n        this.requestMap.clear();\n        this.requestIdCounter = 0;\n\n        if (this.localAudioStream) {\n            this.localAudioStream.getTracks().forEach(track => track.stop());\n            this.localAudioStream = null;\n        }\n        if (this.localVideoStream) {\n            this.localVideoStream.getTracks().forEach(track => track.stop());\n            this.localVideoStream = null;\n        }\n        this._removeLocalVideoPreview();\n\n        if (this.isConnected && showNotification) {\n            ui.notifications.info(`${MODULE_TITLE}: Disconnected from MediaSoup server.`);\n        }\n        this.isConnected = false;\n        this._updateConnectionStatus('disconnected');\n        ui.players.render(true);\n    }\n\n    _handleConnectionFailure() {\n        this.isConnecting = false;\n        if (this.isConnected) {\n            ui.notifications.info(`${MODULE_TITLE}: Disconnected from MediaSoup server.`);\n        }\n        this.disconnect(false);\n        this._updateConnectionStatus('error');\n    }\n\n    async _initializeMediasoupDevice() {\n        try {\n            log('Initializing mediasoup-client Device...');\n            this.device = new window.mediasoupClient.Device();\n            const routerRtpCapabilities = await this._sendSignalingRequest({ type: SIG_MSG_TYPES.GET_ROUTER_RTP_CAPABILITIES });\n            if (!routerRtpCapabilities || Object.keys(routerRtpCapabilities).length === 0) {\n                throw new Error('Received empty or invalid routerRtpCapabilities from server.');\n            }\n            log('Received Router RTP Capabilities. Loading into device...', 'debug');\n            await this.device.load({ routerRtpCapabilities });\n            log('Mediasoup Device loaded successfully.', 'info');\n\n            await this._createSendTransport();\n            await this._createRecvTransport();\n\n            this.isConnected = true;\n            this.isConnecting = false;\n            this._updateConnectionStatus('connected');\n            ui.notifications.info(`${MODULE_TITLE}: Successfully connected to MediaSoup server.`);\n            await this._populateDeviceSettings();\n            ui.players.render(true);\n\n        } catch (error) {\n            log(`Error initializing MediaSoup Device: ${error.message}`, 'error', true);\n            console.error(error);\n            ui.notifications.error(`${MODULE_TITLE}: Initialization failed - ${error.message}`);\n            this._handleConnectionFailure();\n        }\n    }\n\n    _sendSignalingRequest(requestData, timeoutMs = 10000) {\n        return new Promise((resolve, reject) => {\n            if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {\n                return reject(new Error('WebSocket is not open.'));\n            }\n            const requestId = `req_${this.requestIdCounter++}`;\n            const message = { ...requestData, requestId, userId: game.userId };\n\n            this.requestMap.set(requestId, { resolve, reject });\n            log(`Sending signaling request (ID: ${requestId}): ${JSON.stringify(requestData)}`, 'debug');\n            this.socket.send(JSON.stringify(message));\n\n            setTimeout(() => {\n                if (this.requestMap.has(requestId)) {\n                    this.requestMap.delete(requestId);\n                    log(`Signaling request (ID: ${requestId}, Type: ${requestData.type}) timed out.`, 'warn');\n                    reject(new Error(`Request '${requestData.type}' timed out`));\n                }\n            }, timeoutMs);\n        });\n    }\n\n    _handleSignalingMessage(message) {\n        log(`Received signaling message: ${JSON.stringify(message)}`, 'debug');\n        if (message.requestId && this.requestMap.has(message.requestId)) {\n            const { resolve, reject } = this.requestMap.get(message.requestId);\n            if (message.error) {\n                log(`Signaling request (ID: ${message.requestId}) failed: ${message.error}`, 'error');\n                reject(new Error(message.error));\n            } else {\n                resolve(message.data || message);\n            }\n            this.requestMap.delete(message.requestId);\n            return;\n        }\n        switch (message.type) {\n        case SIG_MSG_TYPES.NEW_PRODUCER:\n            log(`Server notified of new producer: ${message.producerId} for user ${message.userId} of kind ${message.kind}`, 'info');\n            this._handleNewRemoteProducer(message);\n            break;\n        case SIG_MSG_TYPES.PRODUCER_CLOSED:\n            log(`Server notified producer closed: ${message.producerId}`, 'info');\n            this._handleRemoteProducerClosed(message.producerId);\n            break;\n        default:\n            log(`Received unhandled signaling message type: ${message.type}`, 'warn');\n        }\n    }\n\n    async _createSendTransport() {\n        try {\n            log('Requesting server to create send transport...', 'debug');\n            const transportInfo = await this._sendSignalingRequest({\n                type: SIG_MSG_TYPES.CREATE_WEBRTC_TRANSPORT,\n                forceTcp: false, \n                producing: true,\n                consuming: false,\n                sctpCapabilities: this.device.sctpCapabilities \n            });\n\n            if (!this.device) throw new Error('Device not initialized for creating send transport.');\n            this.sendTransport = this.device.createSendTransport(transportInfo);\n            log('Send transport created locally.', 'debug');\n\n            this.sendTransport.on('connect', async ({ dtlsParameters }, callback, errback) => {\n                log('Send transport \"connect\" event triggered.', 'debug');\n                try {\n                    await this._sendSignalingRequest({\n                        type: SIG_MSG_TYPES.CONNECT_TRANSPORT,\n                        transportId: this.sendTransport.id,\n                        dtlsParameters\n                    });\n                    callback(); \n                    log('Send transport connected to server.', 'info');\n                } catch (error) {\n                    log(`Error connecting send transport: ${error.message}`, 'error');\n                    errback(error);\n                }\n            });\n\n            this.sendTransport.on('produce', async ({ kind, rtpParameters, appData }, callback, errback) => {\n                log(`Send transport \"produce\" event triggered for kind: ${kind}`, 'debug');\n                try {\n                    const { id } = await this._sendSignalingRequest({\n                        type: SIG_MSG_TYPES.PRODUCE,\n                        transportId: this.sendTransport.id,\n                        kind,\n                        rtpParameters,\n                        appData \n                    });\n                    callback({ id }); \n                    log(`Successfully produced ${kind} (Producer ID: ${id}, AppData: ${JSON.stringify(appData)})`, 'info');\n                } catch (error) {\n                    log(`Error on \"produce\" event for send transport: ${error.message}`, 'error');\n                    errback(error);\n                }\n            });\n\n            this.sendTransport.on('connectionstatechange', (state) => {\n                log(`Send transport connection state changed: ${state}`, 'debug');\n                if (state === 'failed' || state === 'disconnected' || state === 'closed') {\n                    log(`Send transport entered critical state: ${state}.`, 'warn');\n                }\n            });\n\n        } catch (error) {\n            log(`Error creating send transport: ${error.message}`, 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: Could not create send transport - ${error.message}`);\n            this._handleConnectionFailure(); \n        }\n    }\n\n    async _createRecvTransport() {\n        try {\n            log('Requesting server to create receive transport...', 'debug');\n            const transportInfo = await this._sendSignalingRequest({\n                type: SIG_MSG_TYPES.CREATE_WEBRTC_TRANSPORT,\n                forceTcp: false,\n                producing: false,\n                consuming: true,\n                sctpCapabilities: this.device.sctpCapabilities\n            });\n\n            if (!this.device) throw new Error('Device not initialized for creating recv transport.');\n            this.recvTransport = this.device.createRecvTransport(transportInfo);\n            log('Receive transport created locally.', 'debug');\n\n            this.recvTransport.on('connect', async ({ dtlsParameters }, callback, errback) => {\n                log('Receive transport \"connect\" event triggered.', 'debug');\n                try {\n                    await this._sendSignalingRequest({\n                        type: SIG_MSG_TYPES.CONNECT_TRANSPORT,\n                        transportId: this.recvTransport.id,\n                        dtlsParameters\n                    });\n                    callback();\n                    log('Receive transport connected to server.', 'info');\n                } catch (error) {\n                    log(`Error connecting receive transport: ${error.message}`, 'error');\n                    errback(error);\n                }\n            });\n\n            this.recvTransport.on('connectionstatechange', (state) => {\n                log(`Receive transport connection state changed: ${state}`, 'debug');\n                if (state === 'failed' || state === 'disconnected' || state === 'closed') {\n                    log(`Receive transport entered critical state: ${state}.`, 'warn');\n                }\n            });\n\n        } catch (error) {\n            log(`Error creating receive transport: ${error.message}`, 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: Could not create receive transport - ${error.message}`);\n            this._handleConnectionFailure(); \n        }\n    }\n\n    async startLocalAudio() {\n        if (!this.isConnected || !this.sendTransport || !this.device.canProduce(MEDIA_KIND_AUDIO)) {\n            log('Cannot start local audio: Not connected, send transport not ready, or cannot produce audio.', 'warn');\n            ui.notifications.warn(`${MODULE_TITLE}: Cannot start audio. Not ready.`);\n            return;\n        }\n        if (this.producers.has(APP_DATA_TAG_MIC)) {\n            log('Audio already started.', 'info');\n            const producer = this.producers.get(APP_DATA_TAG_MIC);\n            if (producer.paused) await this.resumeProducer(producer);\n            return;\n        }\n\n        log('Starting local audio capture...', 'info');\n        try {\n            const deviceId = game.settings.get(MODULE_ID, SETTING_DEFAULT_AUDIO_DEVICE);\n            const constraints = { audio: deviceId && deviceId !== 'default' ? { deviceId: { exact: deviceId } } : true };\n            log(`Using audio constraints: ${JSON.stringify(constraints)}`, 'debug');\n\n            this.localAudioStream = await navigator.mediaDevices.getUserMedia(constraints);\n            const track = this.localAudioStream.getAudioTracks()[0];\n            if (!track) throw new Error('No audio track found in stream.');\n\n            const producer = await this.sendTransport.produce({\n                track,\n                appData: { mediaTag: APP_DATA_TAG_MIC, userId: game.userId } \n            });\n            this.producers.set(APP_DATA_TAG_MIC, producer);\n            log(`Audio producer created (ID: ${producer.id})`, 'info');\n            this._updateMediaButtonState(APP_DATA_TAG_MIC, true, producer.paused);\n\n            producer.on('trackended', () => {\n                log('Audio track ended (e.g., device unplugged).', 'warn');\n                this.stopLocalAudio(true); \n            });\n            producer.on('transportclose', () => {\n                log('Audio producer transport closed.', 'warn');\n                this.producers.delete(APP_DATA_TAG_MIC);\n                this._updateMediaButtonState(APP_DATA_TAG_MIC, false, false);\n                if (this.localAudioStream) {\n                    this.localAudioStream.getTracks().forEach(t => t.stop());\n                    this.localAudioStream = null;\n                }\n            });\n\n        } catch (error) {\n            log(`Error starting local audio: ${error.message}`, 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: Could not start microphone - ${error.message}`);\n            if (this.localAudioStream) { \n                this.localAudioStream.getTracks().forEach(t => t.stop()); \n                this.localAudioStream = null; \n            }\n        }\n    }\n\n    async stopLocalAudio(_notifyServer = true) {\n        const producer = this.producers.get(APP_DATA_TAG_MIC);\n        if (!producer) {\n            log('No local audio producer to stop.', 'debug');\n            return;\n        }\n        log('Stopping local audio...', 'info');\n        if (!producer.closed) {\n            producer.close(); \n        }\n        \n        if (this.producers.has(APP_DATA_TAG_MIC)) {\n            this.producers.delete(APP_DATA_TAG_MIC);\n            this._updateMediaButtonState(APP_DATA_TAG_MIC, false, false);\n        }\n\n        if (this.localAudioStream) {\n            this.localAudioStream.getTracks().forEach(track => track.stop());\n            this.localAudioStream = null;\n        }\n    }\n\n    async toggleAudioMute() {\n        const producer = this.producers.get(APP_DATA_TAG_MIC);\n        if (!producer || producer.closed) {\n            log('Cannot toggle mute: No active audio producer. Attempting to start audio.', 'info');\n            await this.startLocalAudio();\n            return;\n        }\n        if (producer.paused) {\n            await this.resumeProducer(producer);\n        } else {\n            await this.pauseProducer(producer);\n        }\n    }\n\n    async startLocalVideo() {\n        if (!this.isConnected || !this.sendTransport || !this.device.canProduce(MEDIA_KIND_VIDEO)) {\n            log('Cannot start local video: Not connected, send transport not ready, or cannot produce video.', 'warn');\n            ui.notifications.warn(`${MODULE_TITLE}: Cannot start video. Not ready.`);\n            return;\n        }\n        if (this.producers.has(APP_DATA_TAG_WEBCAM)) {\n            log('Video already started.', 'info');\n            const producer = this.producers.get(APP_DATA_TAG_WEBCAM);\n            if (producer.paused) await this.resumeProducer(producer);\n            return;\n        }\n\n        log('Starting local video capture...', 'info');\n        try {\n            const deviceId = game.settings.get(MODULE_ID, SETTING_DEFAULT_VIDEO_DEVICE);\n            const constraints = { video: deviceId && deviceId !== 'default' ? { deviceId: { exact: deviceId } } : true };\n            log(`Using video constraints: ${JSON.stringify(constraints)}`, 'debug');\n\n            this.localVideoStream = await navigator.mediaDevices.getUserMedia(constraints);\n            const track = this.localVideoStream.getVideoTracks()[0];\n            if (!track) throw new Error('No video track found in stream.');\n\n            const producer = await this.sendTransport.produce({\n                track,\n                encodings: [],\n                appData: { mediaTag: APP_DATA_TAG_WEBCAM, userId: game.userId }\n            });\n            this.producers.set(APP_DATA_TAG_WEBCAM, producer);\n            log(`Video producer created (ID: ${producer.id})`, 'info');\n            this._updateMediaButtonState(APP_DATA_TAG_WEBCAM, true, producer.paused);\n            this._displayLocalVideoPreview(this.localVideoStream);\n\n            producer.on('trackended', () => {\n                log('Video track ended.', 'warn');\n                this.stopLocalVideo(true);\n            });\n            producer.on('transportclose', () => {\n                log('Video producer transport closed.', 'warn');\n                this.producers.delete(APP_DATA_TAG_WEBCAM);\n                this._updateMediaButtonState(APP_DATA_TAG_WEBCAM, false, false);\n                this._removeLocalVideoPreview();\n                if (this.localVideoStream) {\n                    this.localVideoStream.getTracks().forEach(t => t.stop());\n                    this.localVideoStream = null;\n                }\n            });\n\n        } catch (error) {\n            log(`Error starting local video: ${error.message}`, 'error', true);\n            ui.notifications.error(`${MODULE_TITLE}: Could not start webcam - ${error.message}`);\n            if (this.localVideoStream) { \n                this.localVideoStream.getTracks().forEach(t => t.stop()); \n                this.localVideoStream = null; \n            }\n            this._removeLocalVideoPreview();\n        }\n    }\n\n    async stopLocalVideo(_notifyServer = true) {\n        const producer = this.producers.get(APP_DATA_TAG_WEBCAM);\n        if (!producer) {\n            log('No local video producer to stop.', 'debug');\n            return;\n        }\n        log('Stopping local video...', 'info');\n        if (!producer.closed) {\n            producer.close();\n        }\n        \n        if (this.producers.has(APP_DATA_TAG_WEBCAM)) {\n            this.producers.delete(APP_DATA_TAG_WEBCAM);\n            this._updateMediaButtonState(APP_DATA_TAG_WEBCAM, false, false);\n        }\n\n        if (this.localVideoStream) {\n            this.localVideoStream.getTracks().forEach(track => track.stop());\n            this.localVideoStream = null;\n        }\n        this._removeLocalVideoPreview();\n    }\n\n    async toggleVideoEnabled() {\n        const producer = this.producers.get(APP_DATA_TAG_WEBCAM);\n        if (!producer || producer.closed) { \n            log('No active video producer to toggle. Attempting to start video.', 'info');\n            await this.startLocalVideo();\n            return;\n        }\n        if (producer.paused) {\n            await this.resumeProducer(producer);\n            this._displayLocalVideoPreview(this.localVideoStream); \n        } else { \n            await this.pauseProducer(producer);\n            this._removeLocalVideoPreview(); \n        }\n    }\n\n    async pauseProducer(producer) {\n        if (!producer || producer.closed || producer.paused) return;\n        log(`Pausing producer ${producer.id} (Kind: ${producer.kind}, AppData: ${JSON.stringify(producer.appData)})`, 'info');\n        try {\n            await producer.pause();\n            log(`Producer ${producer.id} paused.`, 'info');\n            this._updateMediaButtonState(producer.appData.mediaTag, true, true);\n            \n            if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n                this._sendSignalingRequest({ type: SIG_MSG_TYPES.PAUSE_PRODUCER, producerId: producer.id })\n                    .catch(e => log(`Error notifying server of producer pause: ${e.message}`, 'warn'));\n            }\n        } catch (error) {\n            log(`Error pausing producer ${producer.id}: ${error.message}`, 'error');\n        }\n    }\n\n    async resumeProducer(producer) {\n        if (!producer || producer.closed || !producer.paused) return;\n        log(`Resuming producer ${producer.id} (Kind: ${producer.kind}, AppData: ${JSON.stringify(producer.appData)})`, 'info');\n        try {\n            await producer.resume();\n            log(`Producer ${producer.id} resumed.`, 'info');\n            this._updateMediaButtonState(producer.appData.mediaTag, true, false);\n            \n            if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n                this._sendSignalingRequest({ type: SIG_MSG_TYPES.RESUME_PRODUCER, producerId: producer.id })\n                    .catch(e => log(`Error notifying server of producer resume: ${e.message}`, 'warn'));\n            }\n        } catch (error) {\n            log(`Error resuming producer ${producer.id}: ${error.message}`, 'error');\n        }\n    }\n\n    async _handleNewRemoteProducer({ producerId, userId, kind, appData }) {\n        if (userId === game.userId) {\n            log(`Skipping consumption of own producer ${producerId}`, 'debug');\n            return;\n        }\n        \n        if (!appData || !appData.rtpParameters) {\n            log(`Cannot consume producer ${producerId}: Missing rtpParameters in appData from server notification.`, 'error');\n            return;\n        }\n\n        if (!this.isConnected || !this.recvTransport || !this.device.canConsume({ producerId, kind, rtpParameters: appData.rtpParameters })) {\n            log(`Cannot consume new producer ${producerId}: Not ready or device cannot consume. Device consumable check failed.`, 'warn');\n            return;\n        }\n        log(`Handling new remote producer ${producerId} of kind ${kind} from user ${userId}`, 'info');\n\n        try {\n            const consumerParams = await this._sendSignalingRequest({\n                type: SIG_MSG_TYPES.CONSUME,\n                producerId: producerId,\n                rtpCapabilities: this.device.rtpCapabilities,\n            });\n\n            if (!consumerParams || !consumerParams.id) {\n                throw new Error('Server did not return valid consumer parameters.');\n            }\n\n            const consumer = await this.recvTransport.consume({\n                id: consumerParams.id,\n                producerId: consumerParams.producerId,\n                kind: consumerParams.kind,\n                rtpParameters: consumerParams.rtpParameters,\n                appData: { ...appData, userId, kind }\n            });\n\n            this.consumers.set(consumer.id, consumer);\n            log(`Consumer created (ID: ${consumer.id}, Kind: ${kind}) for producer ${producerId}`, 'info');\n\n            let userStreams = this.remoteUserStreams.get(userId) || {};\n            if (kind === MEDIA_KIND_AUDIO) {\n                userStreams.audioTrack = consumer.track;\n                userStreams.audioConsumerId = consumer.id;\n                const audioElement = document.createElement('audio');\n                audioElement.id = `mediasoup-consumer-audio-${userId}`;\n                audioElement.srcObject = new MediaStream([consumer.track]);\n                audioElement.autoplay = true;\n                document.body.appendChild(audioElement);\n                log(`Playing remote audio for user ${userId}, consumer ${consumer.id}`, 'debug');\n            } else if (kind === MEDIA_KIND_VIDEO) {\n                userStreams.videoTrack = consumer.track;\n                userStreams.videoConsumerId = consumer.id;\n                log(`Received remote video track for user ${userId}, consumer ${consumer.id}. Attaching to UI.`, 'info');\n            }\n            this.remoteUserStreams.set(userId, userStreams);\n\n            if (consumerParams.producerPaused) {\n                log(`Remote producer ${producerId} is paused. Pausing consumer ${consumer.id}.`, 'info');\n            }\n\n            consumer.on('trackended', () => {\n                log(`Remote track ended for consumer ${consumer.id}.`, 'warn');\n                this._handleRemoteProducerClosed(consumer.producerId);\n            });\n            consumer.on('transportclose', () => {\n                log(`Consumer transport closed for consumer ${consumer.id}.`, 'warn');\n                this._handleRemoteProducerClosed(consumer.producerId);\n            });\n\n            ui.players.render(true);\n\n        } catch (error) {\n            log(`Error consuming producer ${producerId}: ${error.message}`, 'error', true);\n            console.error(error);\n        }\n    }\n\n    _handleRemoteProducerClosed(producerId) {\n        let consumerToClose = null;\n        let consumerIdToRemove = null;\n\n        for (const [cId, c] of this.consumers) {\n            if (c.producerId === producerId) {\n                consumerToClose = c;\n                consumerIdToRemove = cId;\n                break;\n            }\n        }\n\n        if (consumerToClose) {\n            log(`Closing consumer ${consumerToClose.id} for remote producer ${producerId}`, 'info');\n            if (!consumerToClose.closed) {\n                consumerToClose.close();\n            }\n            this.consumers.delete(consumerIdToRemove);\n\n            const userId = consumerToClose.appData.userId;\n            const kind = consumerToClose.kind;\n            let userStreams = this.remoteUserStreams.get(userId);\n\n            if (userStreams) {\n                if (kind === MEDIA_KIND_AUDIO) {\n                    $(`#mediasoup-consumer-audio-${userId}`).remove();\n                    userStreams.audioTrack = null;\n                    userStreams.audioConsumerId = null;\n                } else if (kind === MEDIA_KIND_VIDEO) {\n                    this._removeRemoteVideoElement(userId);\n                    userStreams.videoTrack = null;\n                    userStreams.videoConsumerId = null;\n                }\n                if (!userStreams.audioTrack && !userStreams.videoTrack) {\n                    this.remoteUserStreams.delete(userId);\n                } else {\n                    this.remoteUserStreams.set(userId, userStreams);\n                }\n            }\n            ui.players.render(true);\n        } else {\n            log(`No active consumer found for producerId ${producerId} to close.`, 'debug');\n        }\n    }\n\n    // UI helper methods\n    _updateConnectionStatus(_status) {\n        // This method is called but implementation is handled in UI modules\n        // Keeping as placeholder for interface compatibility\n    }\n\n    _updateMediaButtonState(_mediaTag, _isActive, _isPaused) {\n        // This method is called but implementation is handled in UI modules\n        // Keeping as placeholder for interface compatibility\n    }\n\n    _displayLocalVideoPreview(_stream) {\n        // This method is called but implementation is handled in UI modules\n        // Keeping as placeholder for interface compatibility\n    }\n\n    _removeLocalVideoPreview() {\n        // This method is called but implementation is handled in UI modules\n        // Keeping as placeholder for interface compatibility\n    }\n\n    _removeRemoteVideoElement(userId) {\n        // Support both v12 and v13 player list structures\n        const playerSelectors = [\n            `#player-list li[data-user-id=\"${userId}\"]`,\n            `#player-list .player[data-user-id=\"${userId}\"]`,\n            `.players-list li[data-user-id=\"${userId}\"]`,\n            `.players-list .player[data-user-id=\"${userId}\"]`\n        ];\n        \n        for (const selector of playerSelectors) {\n            const playerLi = $(selector);\n            if (playerLi.length) {\n                playerLi.find('.mediasoup-video-container').remove();\n                break;\n            }\n        }\n        \n        // Also remove any standalone audio elements\n        $(`#mediasoup-consumer-audio-${userId}`).remove();\n    }\n\n    async _populateDeviceSettings() {\n        // This method is called but implementation is handled in UI modules\n        // Keeping as placeholder for interface compatibility\n    }\n}","/**\n * MediaSoup Configuration Dialog for FoundryVTT\n * Provides a comprehensive setup guide and configuration interface\n */\n\nimport { MODULE_ID, MODULE_TITLE, SETTING_MEDIASOUP_URL, SETTING_AUTO_CONNECT } from '../constants/index.js';\nimport { log } from '../utils/logger.js';\n\nexport class MediaSoupConfigDialog extends Dialog {\n    constructor(options = {}) {\n        super({\n            title: `${MODULE_TITLE} Configuration`,\n            content: MediaSoupConfigDialog.getDialogContent(),\n            buttons: {\n                save: {\n                    icon: '<i class=\"fas fa-save\"></i>',\n                    label: \"Save Configuration\",\n                    callback: (html) => this._onSave(html)\n                },\n                test: {\n                    icon: '<i class=\"fas fa-plug\"></i>',\n                    label: \"Test Connection\",\n                    callback: (html) => this._onTestConnection(html)\n                },\n                cancel: {\n                    icon: '<i class=\"fas fa-times\"></i>',\n                    label: \"Cancel\"\n                }\n            },\n            default: \"save\",\n            close: () => {},\n            resizable: true,\n            ...options\n        }, {\n            width: 700,\n            height: 800,\n            classes: [\"mediasoup-config-dialog\"]\n        });\n    }\n\n    static getDialogContent() {\n        const currentServerUrl = game.settings.get(MODULE_ID, SETTING_MEDIASOUP_URL) || '';\n        const autoConnect = game.settings.get(MODULE_ID, SETTING_AUTO_CONNECT);\n\n        return `\n            <div class=\"mediasoup-config-container\">\n                <style>\n                    .mediasoup-config-container {\n                        padding: 10px;\n                        font-family: var(--font-primary);\n                    }\n                    .mediasoup-config-section {\n                        margin-bottom: 20px;\n                        padding: 15px;\n                        border: 1px solid var(--color-border-light-primary);\n                        border-radius: 5px;\n                        background: var(--color-bg-option);\n                    }\n                    .mediasoup-config-section h3 {\n                        margin-top: 0;\n                        color: var(--color-text-dark-primary);\n                        border-bottom: 1px solid var(--color-border-light-primary);\n                        padding-bottom: 5px;\n                    }\n                    .mediasoup-step {\n                        margin-bottom: 15px;\n                        padding: 10px;\n                        background: var(--color-bg);\n                        border-left: 4px solid var(--color-border-highlight);\n                        border-radius: 3px;\n                    }\n                    .mediasoup-step-number {\n                        font-weight: bold;\n                        color: var(--color-text-hyperlink);\n                        margin-right: 8px;\n                    }\n                    .mediasoup-config-form {\n                        display: grid;\n                        gap: 15px;\n                    }\n                    .mediasoup-form-group {\n                        display: flex;\n                        flex-direction: column;\n                        gap: 5px;\n                    }\n                    .mediasoup-form-group label {\n                        font-weight: bold;\n                        color: var(--color-text-dark-primary);\n                    }\n                    .mediasoup-form-group input, .mediasoup-form-group select {\n                        padding: 8px;\n                        border: 1px solid var(--color-border-light-primary);\n                        border-radius: 3px;\n                        background: var(--color-bg);\n                        color: var(--color-text-dark-primary);\n                    }\n                    .mediasoup-form-group input:focus, .mediasoup-form-group select:focus {\n                        border-color: var(--color-border-highlight);\n                        outline: none;\n                    }\n                    .mediasoup-connection-status {\n                        padding: 10px;\n                        border-radius: 3px;\n                        margin-top: 10px;\n                    }\n                    .mediasoup-status-success {\n                        background: var(--color-bg-option);\n                        border: 1px solid #28a745;\n                        color: #155724;\n                    }\n                    .mediasoup-status-error {\n                        background: var(--color-bg-option);\n                        border: 1px solid #dc3545;\n                        color: #721c24;\n                    }\n                    .mediasoup-status-testing {\n                        background: var(--color-bg-option);\n                        border: 1px solid #ffc107;\n                        color: #856404;\n                    }\n                    .mediasoup-warning {\n                        background: #fff3cd;\n                        border: 1px solid #ffeaa7;\n                        color: #856404;\n                        padding: 10px;\n                        border-radius: 3px;\n                        margin: 10px 0;\n                    }\n                    .mediasoup-code {\n                        background: var(--color-bg);\n                        border: 1px solid var(--color-border-light-primary);\n                        padding: 10px;\n                        border-radius: 3px;\n                        font-family: monospace;\n                        white-space: pre-wrap;\n                        word-break: break-all;\n                    }\n                </style>\n\n                <!-- Configuration Instructions -->\n                <div class=\"mediasoup-config-section\">\n                    <h3><i class=\"fas fa-cogs\"></i> Setup Instructions</h3>\n                    \n                    <div class=\"mediasoup-step\">\n                        <span class=\"mediasoup-step-number\">1.</span>\n                        <strong>Start MediaSoup Server:</strong> Ensure your MediaSoup server is running. The default configuration expects it at:\n                        <div class=\"mediasoup-code\">wss://your-server.com:4443</div>\n                    </div>\n\n                    <div class=\"mediasoup-step\">\n                        <span class=\"mediasoup-step-number\">2.</span>\n                        <strong>Configure FoundryVTT A/V Settings:</strong> In FoundryVTT's Game Settings → Configure Audio/Video:\n                        <ul>\n                            <li>Set <strong>Audio/Video Conference Mode</strong> to <strong>\"Third Party Module\"</strong></li>\n                            <li>Set <strong>Voice Mode</strong> to <strong>\"Push to Talk\"</strong> or <strong>\"Voice Activation\"</strong></li>\n                            <li>Configure your preferred microphone and camera devices</li>\n                        </ul>\n                    </div>\n\n                    <div class=\"mediasoup-step\">\n                        <span class=\"mediasoup-step-number\">3.</span>\n                        <strong>Configure MediaSoup Server URL:</strong> Enter your server's WebSocket URL below and test the connection.\n                    </div>\n\n                    <div class=\"mediasoup-step\">\n                        <span class=\"mediasoup-step-number\">4.</span>\n                        <strong>Enable the Module:</strong> The MediaSoup A/V integration will replace FoundryVTT's default WebRTC system.\n                    </div>\n                </div>\n\n                <!-- Configuration Form -->\n                <div class=\"mediasoup-config-section\">\n                    <h3><i class=\"fas fa-server\"></i> Server Configuration</h3>\n                    \n                    <div class=\"mediasoup-config-form\">\n                        <div class=\"mediasoup-form-group\">\n                            <label for=\"mediasoup-server-url\">MediaSoup Server WebSocket URL:</label>\n                            <input type=\"url\" \n                                   id=\"mediasoup-server-url\" \n                                   name=\"serverUrl\" \n                                   value=\"${currentServerUrl}\"\n                                   placeholder=\"wss://your-server.com:4443\"\n                                   required>\n                            <small>Enter the full WebSocket URL including protocol (wss:// for secure, ws:// for local testing)</small>\n                        </div>\n\n                        <div class=\"mediasoup-form-group\">\n                            <label>\n                                <input type=\"checkbox\" \n                                       id=\"mediasoup-auto-connect\" \n                                       name=\"autoConnect\" \n                                       ${autoConnect ? 'checked' : ''}>\n                                Auto-connect when joining a world\n                            </label>\n                            <small>Automatically attempt to connect to the MediaSoup server when you join a game world</small>\n                        </div>\n                    </div>\n\n                    <div id=\"mediasoup-connection-status\" class=\"mediasoup-connection-status\" style=\"display: none;\">\n                        <!-- Connection status will be displayed here -->\n                    </div>\n                </div>\n\n                <!-- FoundryVTT A/V Configuration Guide -->\n                <div class=\"mediasoup-config-section\">\n                    <h3><i class=\"fas fa-video\"></i> FoundryVTT A/V Settings Guide</h3>\n                    \n                    <div class=\"mediasoup-warning\">\n                        <i class=\"fas fa-exclamation-triangle\"></i>\n                        <strong>Important:</strong> You must configure FoundryVTT's A/V settings to use \"Third Party Module\" before this plugin will work.\n                    </div>\n\n                    <p>To configure FoundryVTT for MediaSoup:</p>\n                    <ol>\n                        <li>Go to <strong>Game Settings</strong> → <strong>Configure Audio/Video</strong></li>\n                        <li>Set <strong>\"Audio/Video Conference Mode\"</strong> to <strong>\"Third Party Module\"</strong></li>\n                        <li>Configure your voice activation settings:\n                            <ul>\n                                <li><strong>Push to Talk:</strong> Hold a key to transmit</li>\n                                <li><strong>Voice Activation:</strong> Automatic based on volume threshold</li>\n                            </ul>\n                        </li>\n                        <li>Select your preferred microphone and camera devices</li>\n                        <li>Save the settings and reload if prompted</li>\n                    </ol>\n                </div>\n\n                <!-- Troubleshooting Section -->\n                <div class=\"mediasoup-config-section\">\n                    <h3><i class=\"fas fa-wrench\"></i> Troubleshooting</h3>\n                    \n                    <p><strong>Common Issues:</strong></p>\n                    <ul>\n                        <li><strong>Connection Failed:</strong> Check that your MediaSoup server is running and accessible</li>\n                        <li><strong>No Audio/Video:</strong> Ensure FoundryVTT A/V is set to \"Third Party Module\"</li>\n                        <li><strong>Browser Permissions:</strong> Grant microphone/camera permissions when prompted</li>\n                        <li><strong>SSL/HTTPS:</strong> Use wss:// (secure WebSocket) for HTTPS-hosted FoundryVTT instances</li>\n                        <li><strong>Firewall:</strong> Ensure the MediaSoup server port is accessible from clients</li>\n                    </ul>\n\n                    <p><strong>Debug Information:</strong></p>\n                    <div class=\"mediasoup-code\">Current Module Status: ${window.MediaSoupVTT_Client ? 'Loaded' : 'Not Loaded'}\nCurrent Connection: ${window.MediaSoupVTT_Client?.isConnected ? 'Connected' : 'Disconnected'}\nFoundryVTT Version: ${game.version}\nBrowser: ${navigator.userAgent}</div>\n                </div>\n            </div>\n        `;\n    }\n\n    async _onSave(html) {\n        const formData = new FormData(html[0].querySelector('.mediasoup-config-form'));\n        const serverUrl = formData.get('serverUrl') || html.find('#mediasoup-server-url').val();\n        const autoConnect = html.find('#mediasoup-auto-connect').is(':checked');\n\n        try {\n            // Validate URL format\n            if (serverUrl && !this._isValidWebSocketUrl(serverUrl)) {\n                ui.notifications.error('Please enter a valid WebSocket URL (ws:// or wss://)');\n                return;\n            }\n\n            // Save settings\n            await game.settings.set(MODULE_ID, SETTING_MEDIASOUP_URL, serverUrl);\n            await game.settings.set(MODULE_ID, SETTING_AUTO_CONNECT, autoConnect);\n\n            ui.notifications.info(`${MODULE_TITLE} configuration saved successfully!`);\n            log('Configuration saved', { serverUrl, autoConnect });\n\n            // Close dialog\n            this.close();\n\n        } catch (error) {\n            log('Error saving configuration:', error, 'error');\n            ui.notifications.error('Failed to save configuration. Check console for details.');\n        }\n    }\n\n    async _onTestConnection(html) {\n        const serverUrl = html.find('#mediasoup-server-url').val();\n        const statusDiv = html.find('#mediasoup-connection-status');\n\n        if (!serverUrl) {\n            ui.notifications.warn('Please enter a server URL before testing');\n            return;\n        }\n\n        if (!this._isValidWebSocketUrl(serverUrl)) {\n            ui.notifications.error('Please enter a valid WebSocket URL (ws:// or wss://)');\n            return;\n        }\n\n        // Show testing status\n        statusDiv.show().removeClass('mediasoup-status-success mediasoup-status-error')\n               .addClass('mediasoup-status-testing')\n               .html('<i class=\"fas fa-spinner fa-spin\"></i> Testing connection...');\n\n        try {\n            const result = await this._testWebSocketConnection(serverUrl);\n            \n            if (result.success) {\n                statusDiv.removeClass('mediasoup-status-testing')\n                         .addClass('mediasoup-status-success')\n                         .html(`<i class=\"fas fa-check-circle\"></i> Connection successful! (${result.latency}ms)`);\n                ui.notifications.info('MediaSoup server connection test successful!');\n            } else {\n                statusDiv.removeClass('mediasoup-status-testing')\n                         .addClass('mediasoup-status-error')\n                         .html(`<i class=\"fas fa-times-circle\"></i> Connection failed: ${result.error}`);\n                ui.notifications.error(`Connection test failed: ${result.error}`);\n            }\n        } catch (error) {\n            statusDiv.removeClass('mediasoup-status-testing')\n                     .addClass('mediasoup-status-error')\n                     .html(`<i class=\"fas fa-times-circle\"></i> Connection test error: ${error.message}`);\n            log('Connection test error:', error, 'error');\n        }\n    }\n\n    _isValidWebSocketUrl(url) {\n        try {\n            const parsed = new URL(url);\n            return parsed.protocol === 'ws:' || parsed.protocol === 'wss:';\n        } catch {\n            return false;\n        }\n    }\n\n    async _testWebSocketConnection(url) {\n        return new Promise((resolve) => {\n            const startTime = Date.now();\n            const timeout = setTimeout(() => {\n                resolve({ success: false, error: 'Connection timeout (10 seconds)' });\n                if (ws.readyState === WebSocket.CONNECTING || ws.readyState === WebSocket.OPEN) {\n                    ws.close();\n                }\n            }, 10000);\n\n            const ws = new WebSocket(url);\n\n            ws.onopen = () => {\n                const latency = Date.now() - startTime;\n                clearTimeout(timeout);\n                ws.close();\n                resolve({ success: true, latency });\n            };\n\n            ws.onerror = (error) => {\n                clearTimeout(timeout);\n                resolve({ success: false, error: 'WebSocket connection error' });\n            };\n\n            ws.onclose = (event) => {\n                if (event.code !== 1000) { // Not a normal closure\n                    clearTimeout(timeout);\n                    resolve({ success: false, error: `Connection closed with code ${event.code}` });\n                }\n            };\n        });\n    }\n\n    activateListeners(html) {\n        super.activateListeners(html);\n\n        // Add real-time URL validation\n        html.find('#mediasoup-server-url').on('input', (event) => {\n            const input = event.target;\n            const url = input.value;\n            \n            if (url && !this._isValidWebSocketUrl(url)) {\n                input.setCustomValidity('Please enter a valid WebSocket URL (ws:// or wss://)');\n            } else {\n                input.setCustomValidity('');\n            }\n        });\n    }\n}\n\n/**\n * Show the MediaSoup configuration dialog\n */\nexport function showConfigDialog() {\n    new MediaSoupConfigDialog().render(true);\n}","/**\n * Settings registration and management for MediaSoupVTT\n */\n\nimport { \n    MODULE_ID, MODULE_TITLE,\n    SETTING_DEBUG_LOGGING, SETTING_MEDIASOUP_URL, SETTING_AUTO_CONNECT,\n    SETTING_DEFAULT_AUDIO_DEVICE, SETTING_DEFAULT_VIDEO_DEVICE\n} from '../constants/index.js';\nimport { log } from '../utils/logger.js';\nimport { showConfigDialog } from './configDialog.js';\n\nexport function registerSettings() {\n    // Configuration dialog button\n    game.settings.registerMenu(MODULE_ID, 'configDialog', {\n        name: 'MediaSoup Server Configuration',\n        label: 'Configure MediaSoup Server',\n        hint: 'Open the comprehensive configuration dialog with setup instructions.',\n        icon: 'fas fa-cogs',\n        type: 'button',\n        onClick: () => showConfigDialog()\n    });\n\n    game.settings.register(MODULE_ID, SETTING_DEBUG_LOGGING, {\n        name: `${MODULE_TITLE} Debug Logging`,\n        hint: 'Outputs verbose logging to the console for debugging purposes.',\n        scope: 'client', \n        config: true, \n        type: Boolean, \n        default: false,\n    });\n\n    game.settings.register(MODULE_ID, SETTING_MEDIASOUP_URL, {\n        name: 'MediaSoup Server WebSocket URL',\n        hint: 'The WebSocket URL (e.g., wss://your.server.com:4443). Use the configuration dialog above for detailed setup instructions.',\n        scope: 'world', \n        config: true, \n        type: String, \n        default: '',\n        onChange: value => {\n            log(`MediaSoup Server URL changed to: ${value}`);\n            const clientInstance = window.MediaSoupVTT_Client;\n            if (clientInstance) {\n                clientInstance.serverUrl = value;\n                if (clientInstance.isConnected || clientInstance.isConnecting) {\n                    clientInstance.disconnect();\n                    ui.notifications.info(`${MODULE_TITLE}: Server URL changed. Disconnected. Please reconnect manually.`);\n                }\n            }\n        }\n    });\n\n    game.settings.register(MODULE_ID, SETTING_AUTO_CONNECT, {\n        name: 'Auto-connect to MediaSoup Server',\n        hint: 'If checked, attempts to connect automatically when you join a game world.',\n        scope: 'client', \n        config: true, \n        type: Boolean, \n        default: true,\n    });\n\n    game.settings.register(MODULE_ID, SETTING_DEFAULT_AUDIO_DEVICE, {\n        name: 'Default Microphone',\n        hint: 'Select preferred microphone. List populates after connecting or opening settings. May need page reload after first permission grant for all labels.',\n        scope: 'client', \n        config: true, \n        type: String, \n        default: 'default', \n        choices: {'default': 'Browser Default'}\n    });\n\n    game.settings.register(MODULE_ID, SETTING_DEFAULT_VIDEO_DEVICE, {\n        name: 'Default Webcam',\n        hint: 'Select preferred webcam. List populates after connecting or opening settings. May need page reload after first permission grant for all labels.',\n        scope: 'client', \n        config: true, \n        type: String, \n        default: 'default', \n        choices: {'default': 'Browser Default'}\n    });\n}\n\nexport function setupSettingsHooks() {\n    Hooks.on('renderSettingsConfig', async (app, html, _data) => {\n        const clientInstance = window.MediaSoupVTT_Client;\n        if (clientInstance && app.constructor.name === 'SettingsConfig') {\n            const moduleDetails = html.find(`details[data-module-id=\"${MODULE_ID}\"]`);\n            if (moduleDetails.length) {\n                // Add helpful styling and status information\n                addSettingsEnhancements(moduleDetails, clientInstance);\n                \n                if (moduleDetails.attr('open') !== undefined || !clientInstance.availableAudioDevices) {\n                    log('SettingsConfig rendered for our module, attempting to populate device lists.', 'debug');\n                    await clientInstance._populateDeviceSettings();\n                    if (app.element && app.element.length) {\n                        const currentScroll = app.element.find('.scrollable').scrollTop();\n                        app.render(false, {focus: false});\n                        app.element.find('.scrollable').scrollTop(currentScroll);\n                    }\n                }\n            }\n        }\n    });\n}\n\nfunction addSettingsEnhancements(moduleDetails, clientInstance) {\n    // Add status indicator to module header\n    const summary = moduleDetails.find('summary');\n    const isConnected = clientInstance?.isConnected;\n    const statusHtml = `\n        <span class=\"mediasoup-status-indicator\" style=\"\n            margin-left: 10px;\n            padding: 2px 8px;\n            border-radius: 3px;\n            font-size: 11px;\n            font-weight: bold;\n            ${isConnected ? \n                'background: #d4edda; color: #155724; border: 1px solid #c3e6cb;' : \n                'background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;'\n            }\n        \">\n            ${isConnected ? '● Connected' : '● Disconnected'}\n        </span>\n    `;\n    summary.append(statusHtml);\n\n    // Add helpful information after the module settings\n    const helpInfo = `\n        <div class=\"mediasoup-settings-help\" style=\"\n            margin: 15px 0;\n            padding: 15px;\n            background: #f8f9fa;\n            border: 1px solid #dee2e6;\n            border-radius: 5px;\n            font-size: 12px;\n            line-height: 1.4;\n        \">\n            <h4 style=\"margin-top: 0; color: #495057;\">\n                <i class=\"fas fa-info-circle\"></i> Quick Setup Guide\n            </h4>\n            <p style=\"margin: 10px 0;\">\n                <strong>1.</strong> Set FoundryVTT A/V to \"Third Party Module\" in Game Settings → Configure Audio/Video<br>\n                <strong>2.</strong> Use the \"Configure MediaSoup Server\" button above for detailed setup<br>\n                <strong>3.</strong> Test your connection before starting a session\n            </p>\n            <p style=\"margin: 10px 0; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 3px;\">\n                <i class=\"fas fa-exclamation-triangle\"></i> \n                <strong>Important:</strong> FoundryVTT must be configured for \"Third Party Module\" A/V mode for this plugin to work.\n            </p>\n        </div>\n    `;\n    \n    moduleDetails.find('.form-group').last().after(helpInfo);\n}","/**\n * Scene controls integration for MediaSoupVTT\n */\n\nimport { \n    MODULE_ID, MODULE_TITLE,\n    APP_DATA_TAG_MIC, APP_DATA_TAG_WEBCAM\n} from '../constants/index.js';\nimport { log } from '../utils/logger.js';\n\nexport function setupSceneControls() {\n    Hooks.on('getSceneControlButtons', (controls) => {\n        let avControlsGroup = controls.find(c => c.name === `${MODULE_ID}-controls`);\n        if (!avControlsGroup) {\n            avControlsGroup = {\n                name: `${MODULE_ID}-controls`,\n                title: 'MediaSoup A/V',\n                layer: `${MODULE_ID}-layer`,\n                icon: 'fas fa-network-wired',\n                tools: [],\n                activeTool: ''\n            };\n            controls.push(avControlsGroup);\n        } else {\n            avControlsGroup.tools = [];\n        }\n\n        const commonOnClick = async (action) => {\n            const clientInstance = window.MediaSoupVTT_Client;\n            if (!clientInstance) {\n                ui.notifications.error(`${MODULE_TITLE}: Client not ready.`);\n                return;\n            }\n            if (!clientInstance.isConnected && !['connect', 'disconnect'].includes(action)) {\n                ui.notifications.warn(`${MODULE_TITLE}: Not connected to MediaSoup server.`);\n                return;\n            }\n            try {\n                switch (action) {\n                case 'connect':\n                    if (clientInstance.isConnected || clientInstance.isConnecting) {\n                        clientInstance.disconnect();\n                    } else if (!clientInstance.serverUrl) {\n                        ui.notifications.warn(`${MODULE_TITLE}: Server URL not set.`);\n                    } else {\n                        await clientInstance.connect();\n                    }\n                    break;\n                case 'toggleAudio': \n                    await clientInstance.toggleAudioMute(); \n                    break;\n                case 'toggleVideo': \n                    await clientInstance.toggleVideoEnabled(); \n                    break;\n                }\n            } catch (error) {\n                log(`Error in scene control action '${action}': ${error.message}`, 'error');\n                ui.notifications.error(`${MODULE_TITLE}: Action failed - ${error.message}`);\n            }\n        };\n\n        avControlsGroup.tools.push(\n            { \n                name: MODULE_ID + '-toggle', \n                title: 'Connect MediaSoup A/V', \n                icon: 'fas fa-headset', \n                onClick: () => commonOnClick('connect'), \n                button: true, \n                'data-tool': MODULE_ID + '-toggle' \n            },\n            { \n                name: MODULE_ID + '-media-mic', \n                title: 'Start Microphone', \n                icon: 'fas fa-microphone', \n                onClick: () => commonOnClick('toggleAudio'), \n                button: true, \n                visible: false, \n                'data-tool': `${MODULE_ID}-media-mic` \n            },\n            { \n                name: MODULE_ID + '-media-webcam', \n                title: 'Start Webcam', \n                icon: 'fas fa-video', \n                onClick: () => commonOnClick('toggleVideo'), \n                button: true, \n                visible: false, \n                'data-tool': `${MODULE_ID}-media-webcam` \n            }\n        );\n\n        // Update visibility after adding\n        const clientInstance = window.MediaSoupVTT_Client;\n        if (clientInstance) {\n            clientInstance._updateConnectionStatus(\n                clientInstance.isConnected ? 'connected' : \n                    (clientInstance.isConnecting ? 'connecting' : 'disconnected')\n            );\n            if (clientInstance.isConnected) {\n                clientInstance._updateMediaButtonState(\n                    APP_DATA_TAG_MIC, \n                    clientInstance.producers.has(APP_DATA_TAG_MIC), \n                    clientInstance.producers.get(APP_DATA_TAG_MIC)?.paused\n                );\n                clientInstance._updateMediaButtonState(\n                    APP_DATA_TAG_WEBCAM, \n                    clientInstance.producers.has(APP_DATA_TAG_WEBCAM), \n                    clientInstance.producers.get(APP_DATA_TAG_WEBCAM)?.paused\n                );\n            }\n        }\n    });\n}","/**\n * Player list integration for MediaSoupVTT\n */\n\nimport { log } from '../utils/logger.js';\n\nexport function setupPlayerListHooks() {\n    /**\n     * Hook into rendering the player list to add video elements.\n     */\n    Hooks.on('renderPlayerList', (playerListApp, html, _data) => {\n        const clientInstance = window.MediaSoupVTT_Client;\n        if (!clientInstance || !clientInstance.isConnected) {\n            // Clean up any existing video elements if not connected\n            html.find('.mediasoup-video-container').remove();\n            return;\n        }\n\n        log('Rendering player list. Updating A/V elements.', 'debug');\n\n        // Support both v12 and v13 player list structures\n        const playerElements = html.find('li.player, .player');\n        playerElements.each((index, playerElement) => {\n            const playerLi = $(playerElement);\n            \n            // Try multiple ways to get userId for v13 compatibility\n            let userId = playerLi.data('user-id') || playerLi.data('userId') || playerLi.attr('data-user-id');\n            \n            // Fallback: look for user ID in nested elements or attributes\n            if (!userId) {\n                const userElement = playerLi.find('[data-user-id]').first();\n                if (userElement.length) {\n                    userId = userElement.data('user-id') || userElement.attr('data-user-id');\n                }\n            }\n            \n            if (!userId) return;\n\n            // Remove old container first to ensure clean update\n            playerLi.find('.mediasoup-video-container').remove();\n\n            const userStreams = clientInstance.remoteUserStreams.get(userId);\n\n            if (userStreams && userStreams.videoTrack) {\n                log(`User ${userId} has a video track. Creating video element.`, 'debug');\n                const videoContainer = $('<div class=\"mediasoup-video-container\"></div>');\n                const videoElement = $(`<video id=\"mediasoup-remote-video-${userId}\" class=\"mediasoup-remote-video\" autoplay playsinline muted></video>`);\n                \n                try {\n                    videoElement.get(0).srcObject = new MediaStream([userStreams.videoTrack]);\n                } catch (e) {\n                    log(`Error setting srcObject for user ${userId}: ${e.message}`, 'error');\n                }\n                \n                videoContainer.append(videoElement);\n                \n                // Try multiple insertion points for v13 compatibility\n                const insertionTargets = [\n                    playerLi.find('.player-name'),\n                    playerLi.find('.player-title'),\n                    playerLi.find('h3'),\n                    playerLi.find('.name'),\n                    playerLi.find('label')\n                ];\n                \n                let inserted = false;\n                for (const target of insertionTargets) {\n                    if (target.length) {\n                        target.after(videoContainer);\n                        inserted = true;\n                        break;\n                    }\n                }\n                \n                // Fallback: append to player element\n                if (!inserted) {\n                    playerLi.append(videoContainer);\n                }\n            }\n        });\n    });\n}","/**\n * CSS styles for MediaSoupVTT UI elements\n */\n\nexport function injectStyles() {\n    const styles = `\n        .mediasoup-video-container {\n            max-width: 160px;\n            max-height: 120px;\n            margin-top: 5px;\n            overflow: hidden;\n            border-radius: 4px;\n            background-color: #111;\n        }\n        .mediasoup-remote-video, .mediasoup-video-preview {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n            display: block;\n        }\n        .mediasoup-video-preview {\n            position: fixed;\n            bottom: 70px;\n            right: 20px;\n            width: 200px; \n            height: 150px;\n            border: 2px solid #555;\n            background-color: black;\n            z-index: 1050;\n            box-shadow: 0 0 10px rgba(0,0,0,0.5);\n        }\n        #player-list .player .player-name {\n            position: relative;\n            z-index: 1;\n        }\n    `;\n    $('head').append(`<style id=\"mediasoup-vtt-styles\">${styles}</style>`);\n}","/**\n * MediaSoupVTT - Main entry point for FoundryVTT MediaSoup Plugin\n * \n * A WebRTC audio/video communication module for FoundryVTT using MediaSoup SFU server\n */\n\nimport { MODULE_ID, MODULE_TITLE, SETTING_AUTO_CONNECT } from './constants/index.js';\nimport { log } from './utils/logger.js';\nimport { MediaSoupVTTClient } from './client/MediaSoupVTTClient.js';\nimport { registerSettings, setupSettingsHooks } from './ui/settings.js';\nimport { setupSceneControls } from './ui/sceneControls.js';\nimport { setupPlayerListHooks } from './ui/playerList.js';\nimport { injectStyles } from './ui/styles.js';\n\n// Global instance of our client\nlet mediaSoupVTTClientInstance = null;\n\n// +-------------------------------------------------------------------+\n// |                        FOUNDRY VTT HOOKS                          |\n// +-------------------------------------------------------------------+\n\nHooks.once('init', () => {\n    log('Initializing MediaSoupVTT Plugin...', 'info', true);\n\n    // Register all module settings\n    registerSettings();\n\n    // Setup settings-related hooks\n    setupSettingsHooks();\n\n    // Inject CSS styles\n    injectStyles();\n});\n\nHooks.once('ready', async () => {\n    log('Foundry VTT is ready. MediaSoupVTT is active.', 'info', true);\n    \n    if (!window.mediasoupClient) {\n        ui.notifications.error(`${MODULE_TITLE}: mediasoup-client library was not found. Plugin will not function.`, { permanent: true });\n        return;\n    }\n\n    // Create global client instance\n    mediaSoupVTTClientInstance = new MediaSoupVTTClient();\n    window.MediaSoupVTT_Client = mediaSoupVTTClientInstance;\n\n    // Setup UI hooks\n    setupSceneControls();\n    setupPlayerListHooks();\n\n    // Handle auto-connection\n    const autoConnect = game.settings.get(MODULE_ID, SETTING_AUTO_CONNECT);\n    if (autoConnect && mediaSoupVTTClientInstance.serverUrl) {\n        log('Auto-connecting to MediaSoup server...');\n        try { \n            await mediaSoupVTTClientInstance.connect(); \n        } catch (err) { \n            log(`Auto-connect initial attempt failed: ${err.message}`, 'error'); \n        }\n    } else if (autoConnect && !mediaSoupVTTClientInstance.serverUrl) {\n        log('Auto-connect enabled, but server URL is not set. Skipping connection.', 'warn');\n        ui.notifications.warn(`${MODULE_TITLE}: Auto-connect is on, but server URL is not set.`);\n    } else {\n        // Try to populate device settings if permissions are already granted\n        if (navigator.permissions && navigator.permissions.query) {\n            try {\n                const micPerm = await navigator.permissions.query({name: 'microphone'});\n                const camPerm = await navigator.permissions.query({name: 'camera'});\n                if (micPerm.state === 'granted' || camPerm.state === 'granted') {\n                    await mediaSoupVTTClientInstance._populateDeviceSettings();\n                }\n            } catch (e) { \n                log(\"Error querying permissions on ready: \" + e.message, \"warn\"); \n            }\n        }\n    }\n});\n\nlog('MediaSoupVTT Plugin script loaded.');"],"names":[],"mappings":"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S,EAAE;AACX,YAAY,KAAK,EAAE,GAAG;AACtB,YAAY,MAAM,EAAE,GAAG;AACvB,YAAY,OAAO,EAAE,CAAC,yBAAyB;AAC/C,SAAS,CAAC;AACV;;AAEA,IAAI,OAAO,gBAAgB,GAAG;AAC9B,QAAQ,MAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,qBAAqB,CAAC,IAAI,EAAE;AAC1F,QAAQ,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,oBAAoB,CAAC;;AAE9E,QAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,EAAE,gBAAgB,CAAC;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,EAAE,WAAW,GAAG,SAAS,GAAG,EAAE,CAAC;AACtE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAC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"}